<!DOCTYPE html>
<!-- saved from url=(0357)https://disqus.com/embed/comments/?base=default&disqus_version=596b3679&f=openwhispersystems&t_u=https%3A%2F%2Fwhispersystems.org%2Fblog%2Fadvanced-ratcheting%2F&t_d=Open%20WhisperSystems%20%3E%3E%20Blog%20%3E%3E%20Advanced%20cryptographic%20ratcheting&t_t=Open%20WhisperSystems%20%3E%3E%20Blog%20%3E%3E%20Advanced%20cryptographic%20ratcheting&s_o=default#2 -->
<html lang="en" dir="ltr" class=" js no-touch no-localstorage no-sessionstorage contenteditable"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Disqus Comments</title>

    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
    <style>
        html {
            overflow: hidden;
        }
        
    </style>

<style type="text/css"></style><link rel="stylesheet" href="https://a.disquscdn.com/next/styles/lounge.47f69986ec79cd984f5f15b337279c30.css"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="common/config" src="config.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="common.bundle" src="common.18165c72b6656b2c1289c910a843f821.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="lounge.bundle" src="lounge.ab1c5f8a17996eda70d3efb2a4e5abf8.js"></script></head>
<body style="">
    
    <!--[if lte IE 8]>
<script src="//a.disquscdn.com/1396997967/build/vendor/ie8.js"></script>
<![endif]-->
<!--[if IE 9]>
<script src="//a.disquscdn.com/1396997967/build/vendor/ie9.js"></script>
<![endif]-->

    
<script type="text/json" id="disqus-urls">{
    "root":"//disqus.com",
    "next":"//a.disquscdn.com/next/596b3679"
}</script>

    

    
    <script type="text/json" id="disqus-forumData">{"session":{"canModerate":false,"isReadOnly":null,"audienceSyncVerified":false,"canReply":true,"notificationCount":null,"mustVerifyEmail":false},"features":{},"forum":{"name":"Open Whisper Systems","founder":"32992145","settings":{"hasCustomAvatar":false,"allowAnonPost":true,"allowMedia":true,"moderatorText":"","typeface":"auto","promotedDiscoveryEnabled":false,"discoveryMax":false,"ssoRequired":false,"discoveryLocked":false,"audienceSyncEnabled":false,"organicDiscoveryEnabled":false,"backplaneEnabled":false,"discoveryThumbnailsEnabled":false,"linkAffiliationEnabled":false,"colorScheme":"auto","disableSponsoredComments":false},"url":"http://www.whispersystems.org/","favicon":{"permalink":"https://disqus.com/api/forums/favicons/openwhispersystems.jpg","cache":"//a.disquscdn.com/1396997967/images/favicon-default.png"},"language":"en","avatar":{"small":{"permalink":"https://disqus.com/api/forums/avatars/openwhispersystems.jpg?size=32","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"https://disqus.com/api/forums/avatars/openwhispersystems.jpg?size=92","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"}},"pk":2142322,"id":"openwhispersystems"}}</script>

    
    <script type="text/json" id="disqus-threadData">{"cursor":{"hasPrev":false,"prev":null,"total":17,"hasNext":false,"next":"1:0:0"},"code":0,"response":{"lastModified":1397608182,"posts":[{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"name":"Dante","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"Amazing! Fantastic work Moxie and Perrin. Thanks for the images to explain the difference between SCIMP and this.\n\nI can't wait for the new text secure using data (Btw, hopefully it uses a username or pubkey id as username instead of being tied to a phone #.) I also hope the darkmail alliance guys see the advantages of this and use this instead of SCIMP. All of this is real progress. Thanks for everything you do.","createdAt":"2013-11-26T21:43:40","id":"1140184084","thread":"2002264704","depth":0,"numReports":0,"likes":8,"isEdited":false,"message":"\u003cp>Amazing! Fantastic work Moxie and Perrin. Thanks for the images to explain the difference between SCIMP and this.\u003c/p>\u003cp>I can't wait for the new text secure using data (Btw, hopefully it uses a username or pubkey id as username instead of being tied to a phone #.) I also hope the darkmail alliance guys see the advantages of this and use this instead of SCIMP. All of this is real progress. Thanks for everything you do.\u003c/p>","isSpam":false,"isHighlighted":false,"points":8},{"isFlagged":false,"forum":"openwhispersystems","parent":1140184084,"author":{"username":"warcaster","about":"","name":"warcaster","url":"","isAnonymous":false,"rep":1.2138259999999998,"profileUrl":"http://disqus.com/warcaster/","reputation":1.2138259999999998,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2012-04-11T12:18:21","id":"24693280","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/warcaster.jpg","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/warcaster.jpg","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/warcaster.jpg","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"I don't think they are \"just using SCIMP\", though. As Moxie says, SCIMP is synchronous. E-mail by definition *isn't*. Dark Mail Alliance is also using an *improved* version of SCIMP for asynchronous communication. \n\n\nIt will be interesting to see if they have come up with something even better than this, or if they will also include some of Moxie/Trevor's improvements into it - or perhaps it will work entirely different and more optimized to work as an \"e-mail\" protocol, rather than an upgraded IM protocol.","createdAt":"2013-11-27T11:54:19","id":"1140999718","thread":"2002264704","depth":1,"numReports":0,"likes":3,"isEdited":false,"message":"\u003cp>I don't think they are \"just using SCIMP\", though. As Moxie says, SCIMP is synchronous. E-mail by definition *isn't*. Dark Mail Alliance is also using an *improved* version of SCIMP for asynchronous communication.\u003c/p>\u003cp>It will be interesting to see if they have come up with something even better than this, or if they will also include some of Moxie/Trevor's improvements into it - or perhaps it will work entirely different and more optimized to work as an \"e-mail\" protocol, rather than an upgraded IM protocol.\u003c/p>","isSpam":false,"isHighlighted":false,"points":3},{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"username":"danharkins","about":"","name":"Dan Harkins","url":"","isAnonymous":false,"rep":1.232516,"profileUrl":"http://disqus.com/danharkins/","reputation":1.232516,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2013-12-31T21:53:05","id":"88653849","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/danharkins.jpg","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/danharkins.jpg","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/danharkins.jpg","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"This ratcheting scheme reuses Diffie-Hellman public keys. In general, reusing ephemeral Diffie-Hellman public keys can leak secret information unless you validate received keys. Such a step is not mentioned in the specification. Using a specific group (e.g. curve25519 or a finite field defined with a \"safe prime\")  would probably mitigate this but it isn't obvious that the ratcheting scheme is specific to a particular flavor of discrete logarithm cryptography, much less a particular elliptic curve.\n\n\nIt might be a good idea to specify that when using ECC to just send the x-coordinate as the public key. The act of recovering the received public key would implicitly validate it. No need to additionally indicate whether it's (x,y) or (x,-y) because the D-H shared secret would also be the x-coordinate of the shared point and y or -y is irrelevant. For FFC groups check that the 2 \u003c received value \u003c (p-1) and that (received value)^q = 1, where q is the order and p is the prime of the group.\n\n\nOr restrict the scheme to some set of explicitly named groups.","createdAt":"2013-12-31T22:11:02","id":"1182736942","thread":"2002264704","depth":0,"numReports":0,"likes":4,"isEdited":false,"message":"\u003cp>This ratcheting scheme reuses Diffie-Hellman public keys. In general, reusing ephemeral Diffie-Hellman public keys can leak secret information unless you validate received keys. Such a step is not mentioned in the specification. Using a specific group (e.g. curve25519 or a finite field defined with a \"safe prime\")  would probably mitigate this but it isn't obvious that the ratcheting scheme is specific to a particular flavor of discrete logarithm cryptography, much less a particular elliptic curve.\u003c/p>\u003cp>It might be a good idea to specify that when using ECC to just send the x-coordinate as the public key. The act of recovering the received public key would implicitly validate it. No need to additionally indicate whether it's (x,y) or (x,-y) because the D-H shared secret would also be the x-coordinate of the shared point and y or -y is irrelevant. For FFC groups check that the 2 &lt; received value &lt; (p-1) and that (received value)^q = 1, where q is the order and p is the prime of the group.\u003c/p>\u003cp>Or restrict the scheme to some set of explicitly named groups.\u003c/p>","isSpam":false,"isHighlighted":false,"points":4},{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"name":"Matthew","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"Sorry, this probably isn't that relevant to this blog post in particular, but...\n\n\n\nYou mention you've switched from using SMS to data channel. One of the reasons you give for that is to hide metadata about the conversation. However obviously the server involved would have to be able to decrypt enough of the message to figure out the metadata necessary for routing of the message.\n\n\nWhat is the encryption used between the client and the server? Or, to put it another way, what would the NSA have to force (you|server-operator) to hand over to be able to track the metadata? I assume you're not just using HTTPS, and it strikes me that you could well be using exactly the same end-to-end protocol that you describe throughout this blog as the protocol between the client and the server (which seems to me to be a good idea, no least in terms of dog-fooding) but I've not seen it stated anywhere.","createdAt":"2013-12-12T14:55:22","id":"1160077846","thread":"2002264704","depth":0,"numReports":0,"likes":3,"isEdited":false,"message":"\u003cp>Sorry, this probably isn't that relevant to this blog post in particular, but...\u003c/p>\u003cp>You mention you've switched from using SMS to data channel. One of the reasons you give for that is to hide metadata about the conversation. However obviously the server involved would have to be able to decrypt enough of the message to figure out the metadata necessary for routing of the message.\u003c/p>\u003cp>What is the encryption used between the client and the server? Or, to put it another way, what would the NSA have to force (you|server-operator) to hand over to be able to track the metadata? I assume you're not just using HTTPS, and it strikes me that you could well be using exactly the same end-to-end protocol that you describe throughout this blog as the protocol between the client and the server (which seems to me to be a good idea, no least in terms of dog-fooding) but I've not seen it stated anywhere.\u003c/p>","isSpam":false,"isHighlighted":false,"points":3},{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"name":"anon","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"Excellent work.  Are there any research papers on 3DHE key exchange?  I'd like to do some further reading.","createdAt":"2013-12-09T20:38:08","id":"1156388350","thread":"2002264704","depth":0,"numReports":0,"likes":2,"isEdited":false,"message":"\u003cp>Excellent work.  Are there any research papers on 3DHE key exchange?  I'd like to do some further reading.\u003c/p>","isSpam":false,"isHighlighted":false,"points":2},{"isFlagged":false,"forum":"openwhispersystems","parent":1156388350,"author":{"name":"anon","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"Yes, please, 3DHE key exchange? What is that, 3 round, 3 party?","createdAt":"2014-03-22T00:02:46","id":"1295760327","thread":"2002264704","depth":1,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>Yes, please, 3DHE key exchange? What is that, 3 round, 3 party?\u003c/p>","isSpam":false,"isHighlighted":false,"points":0},{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"username":"gcouprie","about":"","name":"gcouprie","url":"","isAnonymous":false,"rep":1.234828,"profileUrl":"http://disqus.com/gcouprie/","reputation":1.234828,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2013-04-15T20:59:27","id":"48257465","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/gcouprie.jpg","cache":"//a.disquscdn.com/uploads/users/4825/7465/avatar32.jpg?1387657812"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/gcouprie.jpg","cache":"//a.disquscdn.com/uploads/users/4825/7465/avatar92.jpg?1387657812","large":{"permalink":"https://disqus.com/api/users/avatars/gcouprie.jpg","cache":"//a.disquscdn.com/uploads/users/4825/7465/avatar92.jpg?1387657812"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"This is amazing. I just had a discussion about asynchronous OTR a few days ago, and the dangling key was a real problem. Then you just go and drop a nice solution :)\nDid you specify a message format, or is it customized for the implementation right now?","createdAt":"2013-11-27T17:10:04","id":"1141495239","thread":"2002264704","depth":0,"numReports":0,"likes":1,"isEdited":false,"message":"\u003cp>This is amazing. I just had a discussion about asynchronous OTR a few days ago, and the dangling key was a real problem. Then you just go and drop a nice solution :)\u003cbr>Did you specify a message format, or is it customized for the implementation right now?\u003c/p>","isSpam":false,"isHighlighted":false,"points":1},{"isFlagged":false,"forum":"openwhispersystems","parent":1141495239,"author":{"username":"moxie0","about":"","name":"moxie0","url":"","isAnonymous":false,"rep":1.312725,"profileUrl":"http://disqus.com/moxie0/","reputation":1.312725,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2012-09-26T04:13:56","id":"32992145","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar32.jpg?1394852550"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar92.jpg?1394852550","large":{"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar92.jpg?1394852550"}}},"media":[{"forum":"openwhispersystems","thumbnailUrl":"//a.disquscdn.com/get?url=https%3A%2F%2Fgithub.global.ssl.fastly.net%2Fimages%2Fmodules%2Flogos_page%2FOctocat.png&key=-Q6LGGODoj-jWB4SzQz4DA","description":"TextSecure - A secure text messaging application for Android.","thread":"2002264704","title":"TextSecure","url":"https://github.com/WhisperSystems/TextSecure/wiki/ProtocolV2","htmlHeight":null,"mediaType":"4","metadata":{"create_method":"preview","thumbnail":"//a.disquscdn.com/get?url=https%3A%2F%2Fgithub.global.ssl.fastly.net%2Fimages%2Fmodules%2Flogos_page%2FOctocat.png&key=-Q6LGGODoj-jWB4SzQz4DA"},"thumbnailWidth":800,"html":"","providerName":"Github","type":"6","resolvedUrl":"https://github.com/WhisperSystems/TextSecure/wiki/ProtocolV2","thumbnailHeight":665,"post":"1141513107","thumbnailURL":"//a.disquscdn.com/get?url=https%3A%2F%2Fgithub.global.ssl.fastly.net%2Fimages%2Fmodules%2Flogos_page%2FOctocat.png&key=-Q6LGGODoj-jWB4SzQz4DA","htmlWidth":null,"id":287640,"location":""},{"forum":"openwhispersystems","thumbnailUrl":"//a.disquscdn.com/get?url=https%3A%2F%2Fwhispersystems.org%2Fblog%2Fimages%2Fnewmessage-scaled.jpg&key=CbQU75O6AJcFfK01iGcEAg","description":"Traditionally, asynchronous messaging systems such as email have relied on protocols like PGP or S/MIME for cryptographic security. These protocols work the way most people are familiar with: one who wishes to receive encrypted email advertises a public key, and those wishing to send encrypted email to that person encrypt their outgoing message with that public key.","thread":"2002264704","title":"Forward Secrecy","url":"https://whispersystems.org/blog/asynchronous-security","htmlHeight":null,"mediaType":"4","metadata":{"create_method":"preview","thumbnail":"//a.disquscdn.com/get?url=https%3A%2F%2Fwhispersystems.org%2Fblog%2Fimages%2Fnewmessage-scaled.jpg&key=CbQU75O6AJcFfK01iGcEAg"},"thumbnailWidth":256,"html":"","providerName":"Whispersystems","type":"6","resolvedUrl":"https://whispersystems.org/blog/asynchronous-security/","thumbnailHeight":454,"post":"1141513107","thumbnailURL":"//a.disquscdn.com/get?url=https%3A%2F%2Fwhispersystems.org%2Fblog%2Fimages%2Fnewmessage-scaled.jpg&key=CbQU75O6AJcFfK01iGcEAg","htmlWidth":null,"id":287650,"location":""},{"forum":"openwhispersystems","thumbnailUrl":"//a.disquscdn.com/get?url=https%3A%2F%2Fwhispersystems.org%2Fblog%2Fimages%2Fotr-current.png&key=2PraSExXrsGJ05FghiaA8A","description":"At Open Whisper Systems we help develop TextSecure, an encrypted chat application for Android. TextSecure was designed as a general purpose SMS/MMS client which would also automatically encrypt conversations when communicating with other TextSecure users. For those encrypted sessions, TextSecure uses a compact derivative of the well known OTR protocol.","thread":"2002264704","title":"Simplifying OTR deniability.","url":"https://whispersystems.org/blog/simplifying-otr-deniability","htmlHeight":null,"mediaType":"4","metadata":{"create_method":"preview","thumbnail":"//a.disquscdn.com/get?url=https%3A%2F%2Fwhispersystems.org%2Fblog%2Fimages%2Fotr-current.png&key=2PraSExXrsGJ05FghiaA8A"},"thumbnailWidth":532,"html":"","providerName":"Whispersystems","type":"6","resolvedUrl":"https://whispersystems.org/blog/simplifying-otr-deniability/","thumbnailHeight":330,"post":"1141513107","thumbnailURL":"//a.disquscdn.com/get?url=https%3A%2F%2Fwhispersystems.org%2Fblog%2Fimages%2Fotr-current.png&key=2PraSExXrsGJ05FghiaA8A","htmlWidth":null,"id":287653,"location":""}],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"The message formats key types, sizes, and derivations are all implementation specific.  This is what we do for TextSecure:\n\nhttps://github.com/WhisperSystems/TextSecure/wiki/ProtocolV2\n\nYou might also be interested in these posts if you're thinking about asynchronous OTR:\n\nhttps://whispersystems.org/blog/asynchronous-security\nhttps://whispersystems.org/blog/simplifying-otr-deniability","createdAt":"2013-11-27T17:18:22","id":"1141513107","thread":"2002264704","depth":1,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>The message formats key types, sizes, and derivations are all implementation specific.  This is what we do for TextSecure:\u003c/p>\u003cp>\u003ca href=\"https://github.com/WhisperSystems/TextSecure/wiki/ProtocolV2\" rel=\"nofollow\">https://github.com/WhisperSyst...\u003c/a>\u003c/p>\u003cp>You might also be interested in these posts if you're thinking about asynchronous OTR:\u003c/p>\u003cp>\u003ca href=\"https://whispersystems.org/blog/asynchronous-security\" rel=\"nofollow\">https://whispersystems.org/blo...\u003c/a>\u003cbr>\u003ca href=\"https://whispersystems.org/blog/simplifying-otr-deniability\" rel=\"nofollow\">https://whispersystems.org/blo...\u003c/a>\u003c/p>","isSpam":false,"isHighlighted":false,"points":0},{"isFlagged":false,"forum":"openwhispersystems","parent":1141513107,"author":{"username":"gcouprie","about":"","name":"gcouprie","url":"","isAnonymous":false,"rep":1.234828,"profileUrl":"http://disqus.com/gcouprie/","reputation":1.234828,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2013-04-15T20:59:27","id":"48257465","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/gcouprie.jpg","cache":"//a.disquscdn.com/uploads/users/4825/7465/avatar32.jpg?1387657812"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/gcouprie.jpg","cache":"//a.disquscdn.com/uploads/users/4825/7465/avatar92.jpg?1387657812","large":{"permalink":"https://disqus.com/api/users/avatars/gcouprie.jpg","cache":"//a.disquscdn.com/uploads/users/4825/7465/avatar92.jpg?1387657812"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"Yup, I already read those ones.\n\nI was wondering something about the initial key exchange. It can be done asynchronously with pregenerated keys, like you did, but did you investigate doing it with only one key?\n\nApparently, you would have to protect the exchange against small subgroup attacks. What are your thoughts about this?","createdAt":"2013-11-27T17:31:57","id":"1141540057","thread":"2002264704","depth":2,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>Yup, I already read those ones.\u003c/p>\u003cp>I was wondering something about the initial key exchange. It can be done asynchronously with pregenerated keys, like you did, but did you investigate doing it with only one key?\u003c/p>\u003cp>Apparently, you would have to protect the exchange against small subgroup attacks. What are your thoughts about this?\u003c/p>","isSpam":false,"isHighlighted":false,"points":0},{"isFlagged":false,"forum":"openwhispersystems","parent":1141540057,"author":{"username":"disqus_2M8xj40PJf","about":"","name":"trevp","url":"","isAnonymous":false,"rep":1.232124,"profileUrl":"http://disqus.com/disqus_2M8xj40PJf/","reputation":1.232124,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2013-11-27T17:47:04","id":"83626932","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_2M8xj40PJf.jpg","cache":"//a.disquscdn.com/uploads/users/8362/6932/avatar32.jpg?1385574748"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/disqus_2M8xj40PJf.jpg","cache":"//a.disquscdn.com/uploads/users/8362/6932/avatar92.jpg?1385574748","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_2M8xj40PJf.jpg","cache":"//a.disquscdn.com/uploads/users/8362/6932/avatar92.jpg?1385574748"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"The initial key agreement could be whatever you want.  Both parties just need to enter the ratchet phase with a shared secret.\n\nNot sure what you mean by \"one key\".  \"Small subgroup\" attacks on ECDH are easily avoided with either public-key validation or curve choice (e.g. Curve25519).","createdAt":"2013-11-27T17:52:27","id":"1141576011","thread":"2002264704","depth":3,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>The initial key agreement could be whatever you want.  Both parties just need to enter the ratchet phase with a shared secret.\u003c/p>\u003cp>Not sure what you mean by \"one key\".  \"Small subgroup\" attacks on ECDH are easily avoided with either public-key validation or curve choice (e.g. Curve25519).\u003c/p>","isSpam":false,"isHighlighted":false,"points":0},{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"name":"Anon","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"How do any of these OTR methods help in a world where the NSA can record both sides of the conversation? They can then crack the initial keys at their leisure and then just follow the protocol. And if they miss the first few packets, what makes cracking the intermediate keys any more difficult than the master key? Once they have an intermediate key they just follow the trail through the rest of the conversation.","createdAt":"2013-11-27T14:42:24","id":"1141172107","thread":"2002264704","depth":0,"numReports":0,"likes":1,"isEdited":false,"message":"\u003cp>How do any of these OTR methods help in a world where the NSA can record both sides of the conversation? They can then crack the initial keys at their leisure and then just follow the protocol. And if they miss the first few packets, what makes cracking the intermediate keys any more difficult than the master key? Once they have an intermediate key they just follow the trail through the rest of the conversation.\u003c/p>","isSpam":false,"isHighlighted":false,"points":1},{"isFlagged":false,"forum":"openwhispersystems","parent":1141172107,"author":{"name":"dlg","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"I'd strongly suggest reading trevp's spec; I was initially confused by the informal description, but having read the spec, I believe it comes close to achieving the strongest forward and future secrecy properties that are temporally consistent with basic safety (i.e., that parties can decrypt the messages they receive).\n\n(I think that what you're missing is that by repeatedly exchanging public keys within an authenticated channel, a purely passive attacker -- one who doesn't act as a man-in-the-middle -- loses access as soon as the parties have exchanged messages.) ","createdAt":"2013-12-20T12:43:23","id":"1171410045","thread":"2002264704","depth":1,"numReports":0,"likes":1,"isEdited":false,"message":"\u003cp>I'd strongly suggest reading trevp's spec; I was initially confused by the informal description, but having read the spec, I believe it comes close to achieving the strongest forward and future secrecy properties that are temporally consistent with basic safety (i.e., that parties can decrypt the messages they receive).\u003c/p>\u003cp>(I think that what you're missing is that by repeatedly exchanging public keys within an authenticated channel, a purely passive attacker -- one who doesn't act as a man-in-the-middle -- loses access as soon as the parties have exchanged messages.) \u003c/p>","isSpam":false,"isHighlighted":false,"points":1},{"isFlagged":false,"forum":"openwhispersystems","parent":1141172107,"author":{"username":"moxie0","about":"","name":"moxie0","url":"","isAnonymous":false,"rep":1.312725,"profileUrl":"http://disqus.com/moxie0/","reputation":1.312725,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2012-09-26T04:13:56","id":"32992145","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar32.jpg?1394852550"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar92.jpg?1394852550","large":{"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar92.jpg?1394852550"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"The \"future secrecy\" aspect of the ratchet means that compromising a single key is not enough to extend the compromise through the rest of the conversation. Each DH ratchet click requires a new key compromise to get past.","createdAt":"2013-11-27T16:45:35","id":"1141438584","thread":"2002264704","depth":1,"numReports":0,"likes":1,"isEdited":false,"message":"\u003cp>The \"future secrecy\" aspect of the ratchet means that compromising a single key is not enough to extend the compromise through the rest of the conversation. Each DH ratchet click requires a new key compromise to get past.\u003c/p>","isSpam":false,"isHighlighted":false,"points":1},{"isFlagged":false,"forum":"openwhispersystems","parent":1141172107,"author":{"name":"anon skeptic","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"are you implying NSA has ECDH cracked?","createdAt":"2013-11-27T18:54:59","id":"1141683083","thread":"2002264704","depth":1,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>are you implying NSA has ECDH cracked?\u003c/p>","isSpam":false,"isHighlighted":false,"points":0},{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"username":"antigraviton","about":"","name":"Antigraviton","url":"","isAnonymous":false,"rep":1.232124,"profileUrl":"http://disqus.com/antigraviton/","reputation":1.232124,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2013-12-04T13:16:24","id":"84524734","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/antigraviton.jpg","cache":"//a.disquscdn.com/uploads/users/8452/4734/avatar32.jpg?1386163315"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/antigraviton.jpg","cache":"//a.disquscdn.com/uploads/users/8452/4734/avatar92.jpg?1386163315","large":{"permalink":"https://disqus.com/api/users/avatars/antigraviton.jpg","cache":"//a.disquscdn.com/uploads/users/8452/4734/avatar92.jpg?1386163315"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"Did I miss something? What about authentication of the other party... If I'm Alice, how do I know I'm actually using OTR (or any Diffie-Hellman base exchange) with Bob and not some MITM (who in turn is impersonating Alice with Bob)?","createdAt":"2013-12-04T13:21:54","id":"1150161135","thread":"2002264704","depth":0,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>Did I miss something? What about authentication of the other party... If I'm Alice, how do I know I'm actually using OTR (or any Diffie-Hellman base exchange) with Bob and not some MITM (who in turn is impersonating Alice with Bob)?\u003c/p>","isSpam":false,"isHighlighted":false,"points":0},{"isFlagged":false,"forum":"openwhispersystems","parent":1150161135,"author":{"username":"moxie0","about":"","name":"moxie0","url":"","isAnonymous":false,"rep":1.312725,"profileUrl":"http://disqus.com/moxie0/","reputation":1.312725,"location":"","isPrivate":false,"isPrimary":true,"joinedAt":"2012-09-26T04:13:56","id":"32992145","avatar":{"small":{"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar32.jpg?1394852550"},"isCustom":false,"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar92.jpg?1394852550","large":{"permalink":"https://disqus.com/api/users/avatars/moxie0.jpg","cache":"//a.disquscdn.com/uploads/users/3299/2145/avatar92.jpg?1394852550"}}},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"We do 3DHE with identity keys: https://whispersystems.org/blog/simplifying-otr-deniability/","createdAt":"2013-12-04T18:51:14","id":"1150603945","thread":"2002264704","depth":1,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>We do 3DHE with identity keys: \u003ca href=\"https://whispersystems.org/blog/simplifying-otr-deniability/\" rel=\"nofollow\">https://whispersystems.org/blo...\u003c/a>\u003c/p>","isSpam":false,"isHighlighted":false,"points":0},{"isFlagged":false,"forum":"openwhispersystems","parent":null,"author":{"name":"moore","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar32.png","cache":"//a.disquscdn.com/1396997967/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1396997967/images/noavatar92.png","cache":"//a.disquscdn.com/1396997967/images/noavatar92.png"},"isAnonymous":true},"media":[],"isDeleted":false,"isApproved":true,"dislikes":0,"raw_message":"I assume your final message format struct is ment to have a body in it?","createdAt":"2013-11-27T19:34:02","id":"1141746985","thread":"2002264704","depth":0,"numReports":0,"likes":0,"isEdited":false,"message":"\u003cp>I assume your final message format struct is ment to have a body in it?\u003c/p>","isSpam":false,"isHighlighted":false,"points":0}],"thread":{"feed":"http://openwhispersystems.disqus.com/open_whispersystems_blog_advanced_cryptographic_ratcheting/latest.rss","uploadAdd":"//openwhispersystems.disqus.com/thread/open_whispersystems_blog_advanced_cryptographic_ratcheting/async_media_upload/","identifiers":[],"dislikes":0,"likes":2,"message":"","id":"2002264704","createdAt":"2013-11-26T21:00:50","category":"2175370","clean_title":"Open WhisperSystems &gt;&gt; Blog &gt;&gt; Advanced cryptographic ratcheting","userScore":0,"moderators":[32992145],"isDeleted":false,"hasStreaming":false,"uploadRemove":"//openwhispersystems.disqus.com/thread/open_whispersystems_blog_advanced_cryptographic_ratcheting/async_media_remove/","isClosed":false,"link":"https://whispersystems.org/blog/advanced-ratcheting/","slug":"open_whispersystems_blog_advanced_cryptographic_ratcheting","forum":"openwhispersystems","author":"32992145","posts":17,"userSubscription":false,"title":"Open WhisperSystems >> Blog >> Advanced cryptographic ratcheting","highlightedPost":null}},"order":"popular"}</script>

    

    <div id="fixed-content"></div>

    <script src="lounge.load.js"></script>
    


</body></html>